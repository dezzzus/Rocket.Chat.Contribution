<template name="adminFlex">
	<aside class="sidebar sidebar--flex sidebar-flex-background" role="navigation">
		<header class="sidebar__header">
			{{> accountBox lighten=true }}
			<button class="sidebar-flex__back-button sidebar-flex-content-active" data-action="back">
				<svg class="sidebar-flex__back-icon">
					<use href="#icon-arrow-back"></use>
				</svg>
				<span>Back to chat</span>
			</button>
		</header>
		<div class="rooms-list" aria-label="{{_ "Administration"}}">
			<h3 class="rooms-list__type sidebar-content">{{_ "Administration"}}</h3>
			<ul class="rooms-list__list">
				{{> sidebarItem menuItem "Info" false "admin-info" "" }}

				{{#if hasPermission 'run-import'}}
					{{> sidebarItem menuItem "Import" false "admin-import" "" }}
				{{/if}}

				{{#if hasPermission 'view-room-administration'}}
					{{> sidebarItem menuItem "Rooms" false "admin-rooms" "" }}
				{{/if}}

				{{#if hasPermission 'view-user-administration'}}
					{{> sidebarItem menuItem "Users" false "admin-users" "" }}
				{{/if}}

				{{#each adminBoxOptions}}
					{{#if permissionGranted}}
						{{> sidebarItem menuItem label false href "" }}
					{{/if}}
				{{/each}}
			</ul>

			{{#if hasPermission 'view-privileged-setting'}}
				<h3 class="rooms-list__type sidebar-content">{{_ "Settings"}}</h3>
				<div class="rc-input sidebar-flex__search">
					<label class="rc-input__label">
						<div class="rc-input__wrapper">
							<div class="rc-input__icon">
								<svg class="rc-input__icon-svg rc-input__icon-svg--magnifier">
									<use href="#icon-magnifier"></use>
								</svg>
							</div>
							<input type="text" class="rc-input__element rc-input__element--small" name="settings-search" placeholder="{{_ 'Search'}}">
						</div>
					</label>
				</div>
				<ul class="rooms-list__list">
					{{#each groups}}
						{{> sidebarItem menuItem label false "admin" _id }}
					{{/each}}
				</ul>
			{{/if}}
		</div>
	</aside>
</template>
